<div id="wrapper-container">
  <div id="annotation-container">
    <app-annotation-pipeline
      style="width: 35%"
      (emitPipelineId)="setPipeline($event)"
      (emitIsConfigValid)="setConfigValid($event)"></app-annotation-pipeline>
    <div style="width: 60%">
      <div id="annotation-mode">
        <button
          id="annotation-jobs"
          (click)="switchView('jobs')"
          [ngClass]="currentView === 'jobs' ? 'active-view' : 'inactive-view'"
          >Annotation jobs</button
        >
        <button
          id="annotation-jobs"
          (click)="switchView('single allele')"
          [ngClass]="currentView === 'single allele' ? 'active-view' : 'inactive-view'"
          >Single allele annotation</button
        >
      </div>

      <div *ngIf="currentView === 'jobs'">
        <div *ngIf="isCreationFormVisible">
          <app-job-creation
            (emitFile)="setFile($event)"
            (emitFileSeparator)="setFileSeparator($event)"
            (emitGenome)="setGenome($event)"
            (emitUpdatedFileHeader)="setUpdatedFileHeader($event)"></app-job-creation>
          <div style="margin-top: 10px">
            <span class="error-message">{{ creationError }}</span>
            <div id="buttons-wrapper">
              <button id="create-button" (click)="autoSavePipeline()" tabindex="1" [disabled]="disableCreate()"
                >Create</button
              >
              <button id="reset-button" (click)="onResetClick()" tabindex="-1">Reset</button>
            </div>
          </div>
        </div>

        <div *ngIf="!isCreationFormVisible && currentJob" id="result">
          <div id="current-job-info">
            <div>
              <span class="job-name">Job name: {{ currentJob.name }}</span>
              <span class="status-label" [ngClass]="getStatusClass()">{{ currentJob.status }}</span>
            </div>
            <div *ngIf="currentJob.status === 'success'">
              <span id="file-name">{{ currentJob.annotatedFileName }}</span>
              <a id="download-result" [href]="downloadLink" download
                ><span class="material-symbols-outlined download-icon">download</span></a
              >
            </div>
          </div>

          <div id="new-job-section">
            <button id="new-job-button" (click)="showCreateMode()"
              ><span class="material-symbols-outlined">add</span>new job</button
            >
          </div>
        </div>
      </div>

      <div *ngIf="currentView === 'single allele'">
        <app-single-annotation
          (alleleUpdateEmit)="refreshAllelesTable()"
          (autoSaveTrigger)="autoSavePipeline()"></app-single-annotation>
      </div>
    </div>
  </div>

  <div style="width: 20%">
    <app-jobs-table *ngIf="currentView === 'jobs'"></app-jobs-table>
    <app-alleles-table
      *ngIf="currentView === 'single allele'"
      (emitAllele)="triggerSingleAlleleAnnotation($event)"></app-alleles-table>
  </div>
</div>

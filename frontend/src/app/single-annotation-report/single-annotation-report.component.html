<div *ngIf="report" id="report">
  <div id="variant">
    <div id="report-header">
      <h2>Variant</h2>
      <h2 id="download-report" download>
        <button (click)="saveReport()" id="download-report-button"
          ><span class="material-symbols-outlined download-icon">download</span>Download report</button
        >
      </h2>
    </div>
    <div id="variant-data-container">
      <div>
        <div class="variant-data-label">chromosome</div>
        <div class="variant-data" id="variant-chromosome">{{ report.variant.chromosome }}</div>
      </div>
      <hr />
      <div>
        <div class="variant-data-label">position</div>
        <div class="variant-data" id="variant-position">{{ report.variant.position }}</div>
      </div>
      <hr />
      <div>
        <div class="variant-data-label">reference</div>
        <div class="variant-data" id="variant-reference">{{ report.variant.reference }}</div>
      </div>
      <hr />
      <div>
        <div class="variant-data-label">alternative</div>
        <div class="variant-data" id="variant-alternate">{{ report.variant.alernative }}</div>
      </div>
      <hr />
      <div>
        <div class="variant-data-label">variant type</div>
        <div class="variant-data" id="variant-type">{{ report.variant.variantType }}</div>
      </div>
    </div>
  </div>
  <div id="annotators">
    <div *ngFor="let annotator of report.annotators" class="annotator">
      <div class="attributes">
        <div *ngFor="let attribute of annotator.attributes" class="attribute-container" style="width: 100%">
          <div class="attribute">
            <div class="attribute-header">{{ attribute.name }}</div>
            <div class="attribute-description">{{ attribute.description }}</div>
            <div class="attribute-source">source: {{ attribute.source }}</div>
          </div>
          <div class="attribute-result">
            <app-histogram-wrapper
              *ngIf="attribute.result.histogramLink"
              [histogramUrl]="attribute.result.histogramLink"
              [value]="attribute.result.value"></app-histogram-wrapper>
            <div
              class="value-result"
              *ngIf="!attribute.result.histogramLink && !tableViewSources.includes(attribute.source)"
              >{{ attribute.result.value }}</div
            >
            <div
              *ngIf="
                tableViewSources.includes(attribute.source) &&
                annotator.details.name === 'effect_annotator' &&
                attribute.result.value
              ">
              <app-effect-table
                [rawEffectDetails]="attribute.result.value.toString()"
                [source]="attribute.source"></app-effect-table>
            </div>
          </div>
        </div>
      </div>

      <div class="annotator-details">
        <div>
          <div class="annotator-label"
            >Annotator: <span class="annotator-header">{{ annotator.details.name }}</span></div
          >
          <markdown class="annotator-description">{{ annotator.details.description }}</markdown>
        </div>

        <div *ngIf="annotator.details.resources.length" class="resources">
          <div *ngFor="let resource of annotator.details.resources" class="resource">
            <div class="resource-label">Resource</div>
            <div
              ><span class="id-label">id: </span>
              <a target="_blank" [href]="resource.resourceUrl" class="annotator-resource">{{
                resource.resourceId
              }}</a></div
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
